-- Modified from: https://github.com/baburdick/psqlrc-files

-- source: http://opensourcedbms.com/dbms/psqlrc-psql-startup-file-for-postgres/
\echo
\echo 'Administrative queries:\n'
\echo '  :aliases          -- Show all aliases'
\echo '  :settings         -- Server settings'
\echo '  :conninfo         -- Server connections'
\echo '  :activity         -- Server activity'
\echo '  :locks            -- Lock info'
\echo '  :blocking         -- Blocking queries'
\echo '  :waits            -- Waiting queries'
\echo '  :autovac_runtime  -- Whether autovacuum is running, and how long it has been running'
\echo '  :last_vacuum      -- Last time the tables were vacuumed and analyzed'
\echo '  :vac_ready        -- Tables autovacuum sees as eligible for vacuuming'
\echo '  :largest_objects  -- Largest tables and indexes'
\echo '  :dbsize           -- Database size'
\echo '  :tablesize        -- Tables size'
\echo '  :uselesscol       -- Useless columns'
\echo '  :cachehit         -- Cache hit rate (effective databases are at 99% and up)'
\echo '  :rtsize           -- Relational table sizes'
\echo '  :tsize            -- Table sizes (alternate)'
\echo '  :bloat            -- Table and index bloat, ordered by most wasteful'
\echo '  :uptime           -- Server uptime'
\echo '  :sp               -- Search path'
\echo '  :enums            -- All the enumerated types'
\echo '  :clear            -- Clear the terminal screen'
\echo '  :ll               -- List the contents of the current directory'
\echo '  :menu             -- Help Menu'
\echo '  \\h                -- Help with SQL commands'
\echo '  \\?                -- Help with psql commands'

-- Use when .psqlrc does not load this file automatically:
--\set aliases          '\\i ~/.config/pg/psqlrc-admin'
-- Use when .psqlrc loads this file automatically:
\set aliases          '\\i ~/.config/pg/psqlrc'
\set settings         'SELECT name, setting,unit,context FROM pg_settings'
\set locks            'cat ~/.config/pg/aliases/locks.sql'
\set blocking         'cat ~/.config/pg/aliases/blocking.sql'
\set conninfo         'SELECT usename, count(*) FROM pg_stat_activity GROUP BY usename;'
\set activity         'cat ~/.config/pg/aliases/activity.sql'
\set waits            'cat ~/.config/pg/aliases/waits.sql'
\set autovac_runtime  'cat ~/.config/pg/aliases/autovac_runtime.sql'
\set last_vacuum      'cat ~/.config/pg/aliases/last_vacuum_analyze.sql'
\set vac_ready        'cat ~/.config/pg/aliases/vac_ready.sql'
\set largest_objects  'cat ~/.config/pg/aliases/largest_objects.sql'
\set dbsize           'cat ~/.config/pg/aliases/dbsize.sql'
\set tablesize        'cat ~/.config/pg/aliases/tablesize.sql'
\set uselesscol       'cat ~/.config/pg/aliases/uselesscol.sql'
\set cache_hit        'cat ~/.config/pg/aliases/cache_hit.sql'
-- rtsize and tsize source: https://gist.github.com/pivaldi/4054440
\set rtsize           'cat ~/.config/pg/aliases/rtsize.sql'
\set tsize            'cat ~/.config/pg/aliases/tsize.sql'
\set bloat            'cat ~/.config/pg/aliases/bloat.sql'
\set uptime           'SELECT now() - pg_postmaster_start_time() AS uptime;'
\set sp               'SHOW search_path;'
\set enums            'cat ~/.config/pg/aliases/enums.sql'
\set clear            '\\! clear;'
\set ll               '\\! ls -lrt;'
